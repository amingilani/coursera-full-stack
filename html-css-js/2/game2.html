<!DOCTYPE html>
<html>
<!--
Hello! Thank you for reviewing my work!
This file is available on Github:
https://github.com/amingilani/coursera-full-stack
- Amin Shah Gilani <amin@gilani.me>
-->

<head>
    <meta charset="utf-8">
    <title>Color guessing game</title>
</head>

<body>
    <script type="text/javascript">
    const playGame = () => {
        const colors = [
            'blue',
            'cyan',
            'gold',
            'gray',
            'green',
            'magenta',
            'orange',
            'red',
            'white',
            'yellow',
            'black',
            'purple'
        ].sort();

        const selectRandomFrom = function(arr = []) {
          if (arr.length == 0) return ''
          const random = Math.floor(Math.random() * (arr.length - 1));
          return arr[random]
        };

        const color = selectRandomFrom(colors);

        alert(`The color I am thinking of is ${color}`);

        const question = function(tries = 0) {
          return 'I am thinking of one of these colors:\n\n' +
          colors.join(', ') + '\n\n' +
          'What color am I thinking of?'
        }

        const huh = "Sorry, I don't recognize your color\n\n" +
                    "Please try again";

        const youAreHigher = "Sorry, your guess is incorrect\n\n" +
                    "Hint: your color is alphabetically higher than mine\n\n" +
                    "Please try again!";

        const youAreLower = "Sorry, your guess is incorrect\n\n" +
                    "Hint: your color is alphabetically lower than mine\n\n" +
                    "Please try again!";

        const answer = function(guessCount) {
          return 'Congratulations! You have guessed the color!\n\n' +
          'It took you ' + guessCount + ' gueses to finish the game!\n\n' +
          'You will see the color in the background after you hit "OK".'
        }

        let guess = prompt(question());
        let guessCount = 1
        while ( guess.toLowerCase() !== color) {
          if (!colors.includes(guess.toLowerCase())) {
            alert(huh);
          } else {
            if (guess < color) {
              alert(youAreHigher);
            } else {
              alert(youAreLower);
            }
          }
          guessCount += 1
          guess = prompt(question());
        }
        let myBody=document.getElementsByTagName("body")[0];
        myBody.style.background=guess;
        alert(answer(guessCount));
        }

        window.onload = () => {
          playGame();
        }
    </script>
</body>

</html>
